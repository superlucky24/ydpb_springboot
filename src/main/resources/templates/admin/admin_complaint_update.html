<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>민원 처리 | 관리자 메뉴</title>

    <link rel="shortcut icon" th:href="@{/images/favicon.ico}">
    <link rel="stylesheet" th:href="@{/css/reset.css}">
    <link rel="stylesheet" th:href="@{/css/ydpb.css}">
    <link rel="stylesheet" th:href="@{/css/ydpb_community_center_write.css}">
    <script th:src="@{/js/admin.js}"></script>
    <script th:src="@{/js/jquery-3.3.1.min.js}"></script>
    <script th:src="@{/js/ydpb.js}"></script>
    <script th:src="@{/js/ydpb_community_center_write.js}"></script>
</head>
<body>
<div id="wrap">
    <!-- header -->
    <header class="header" th:replace="~{admin/common/admin_header_footer::header}"></header>
    <!-- //header -->

    <!-- search -->
    <div class="search"></div>
    <!-- //search -->

    <!-- container -->
    <div class="container">
        <div class="contents_wrap safe_area">
            <!-- side menu -->
            <aside class="side_menu" th:replace="~{admin/common/admin_sidemenu::side}"></aside>
            <!-- //side menu -->

            <!-- main -->
            <main>
                <!-- location -->
                <div class="location">
                    <div class="location_title">
                        <h2>민원 처리</h2>
                    </div>
                </div>
                <!-- location -->

                <!-- contents -->
                <div class="contents">
                    <div class="board_write">
                        <p class="text_alert alert_write"><span class="required_mark">필수항목</span> 표시는 필수 항목 입니다.</p>
                        <form th:action="@{/admin/complaint/update}" method="post" onreset="clearForm(this)">
<!--                        페이징용 데이터 추가-->
                            <input type="hidden" name="pageNum" th:value= "${cri.pageNum }"  />
                            <input type="hidden" name="amount" th:value= "${cri.amount }"  />
<!--                        수정용 글번호 데이터 추가-->
                            <input type="hidden" name="comId" th:value= "${complaint.comId }"  />
<!--                        검색용 데이터-->
                            <input name="searchKeyword"  type="hidden" th:value="${cri.searchKeyword }" >
                            <input name="searchType"  type="hidden" th:value="${cri.searchType }" >
                            <table class="table_form">
                                <caption class="blind">민원 게시판 답변</caption>
                                <colgroup>
                                    <col class="col1">
                                    <col class="col2">
                                </colgroup>
                                <tbody>
                                <tr>
                                    <th scope="row">
                                        <label for="comTitle">제목</label>
<!--                                        <span class="required_mark">필수항목</span>-->
                                    </th>
                                    <td>
                                        <input type="text" name="comTitle" id="comTitle" class="input form_input" maxlength="300"
                                               th:value="${complaint.getComTitle()}" required disabled>
                                    </td>
                                </tr>
                                <tr>
                                    <th scope="row">
                                        <label for="comcontent">내용</label>
<!--                                        <span class="required_mark">필수항목</span>-->
                                    </th>
                                    <td>
                                        <textarea name="comcontent" id="comcontent" class="input" rows="10" maxlength="4000" required disabled
                                            th:text="${complaint.getComContent()}">구로디지털...</textarea>
                                    </td>
                                </tr>
                                <tr>
                                    <th scope="row">
                                        <label for="comAnswer">답변</label>
                                        <span class="required_mark">필수항목</span>
                                    </th>
                                    <td>
                                        <textarea name="comAnswer" id="comAnswer" class="input" rows="10" maxlength="4000" required
                                                  th:text="${complaint.getComAnswer()}"></textarea>
                                    </td>
                                </tr>
                                <tr>
                                    <th scope="row">
                                        처리상황
                                        <span class="required_mark">필수항목</span>
                                    </th>
                                    <td>
                                        <div class="radio">
                                            <input type="radio" name="comStatus" id="comStatusIng" value="진행중" checked>
                                            <label for="comStatusIng">진행중</label>
                                        </div>
                                        <div class="radio">
                                            <input type="radio" name="comStatus" id="comStatusEnd" value="완료">
                                            <label for="comStatusEnd">완료</label>
                                        </div>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                            <div class="btns">
                                <button data-oper="list"  type="submit"  class="btn btn_default">목록</button>
                                <button data-oper="update" type="submit" class="btn btn_write" >저장</button>
                                <button type="reset" class="btn btn_cancel" >삭제</button>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- //contents -->


            </main>
            <!-- //main -->
        </div>
    </div>
    <!-- //container -->

    <!-- footer -->
    <footer class="footer" th:replace="~{admin/common/admin_header_footer::footer}"></footer>
    <!-- //footer -->
    <!-- 스크립트 추가 -->
    <script type="text/javascript">
        $(document).ready(function() {
            //form 태그 할당
            var formObj = $("form");
            //이벤트 : button 클릭
            $('button').on('click',function(e){
                // alert('버튼 클릭');
                e.preventDefault();//브라우저 기본 기능 제거

                var operation  = $(this).data("oper");
                // 콘솔 출력
                console.log(operation);
                //data-oper 값을 조건으로 분기
                if(operation ==='list'){
                    // 목록으로 가는 경우 action 값과 method 값 수정
                    formObj.attr("action","/admin/complaint/list").attr("method","get");
                    // clone으로 유지할 데이터 복사
                    var pageNumTag = $("input[name='pageNum']").clone();
                    var amountTag = $("input[name='amount']").clone();

                    formObj.empty(); // 리스트로 갈 시 입력데이터 필요없으므로 제거

                    //clone으로 복사한 데이터 폼에 붙임
                    formObj.append(pageNumTag);
                    formObj.append(amountTag);

                }else if(operation ==='update'){ // 수정인 경우
                    // action값 수정 요청으로 변경
                    formObj.attr("action","/admin/complaint/update");
                }
                // 정상처리되는지 폼 로그 출력
                console.log(formObj.serialize());
                // 폼 submit() 실행
                formObj.submit();
            });
        });
    </script>
</div>
</body>
</html>
