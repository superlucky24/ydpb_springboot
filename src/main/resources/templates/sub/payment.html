<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>수수료 결제 | 민원안내 | 영등포본동 주민센터</title>

  <link rel="shortcut icon" th:href="@{/images/favicon.ico}">
  <link rel="stylesheet" th:href="@{/css/reset.css}">
  <link rel="stylesheet" th:href="@{/css/ydpb.css}">
  <link rel="stylesheet" th:href="@{/css/ydpb_status.css}">
  <link rel="stylesheet" th:href="@{/css/ydpb_SHAdd.css}">

<!-- 결제용 스크립트 -->
  <script src="https://cdn.iamport.kr/v1/iamport.js"></script>

  <script th:src="@{/js/jquery-1.12.4.min.js}"></script>
  <script th:src="@{/js/jquery-3.3.1.min.js}"></script>
  <script th:src="@{/js/prefixfree.min.js}"></script>
  <script>const menuName = '수수료 결제';</script>
  <script th:src="@{/js/ydpb.js}"></script>
</head>
<body>
<div id="wrap">
  <header class="header" th:replace="~{/common/header_footer_layout :: header}"></header>
  <div class="search" th:replace="~{/common/header_footer_layout :: search}"></div>

  <div class="container">
    <div class="contents_wrap safe_area">
      <aside class="side_menu" th:replace="~{/common/sidemenu_layout :: sidemenu}"></aside>

      <main>
        <div class="location">
          <div class="location_title">
            <h2>수수료 결제</h2>
          </div>
          <div class="location_path">
            <span class="loc_home"><a th:href="@{/}">홈</a></span>
            <span class="loc_arrow">></span>
            <span class="loc_text"><a th:href="@{/}">민원안내</a></span>
            <span class="loc_arrow">></span>
            <span class="loc_text">수수료 결제</span>
          </div>
        </div>

        <div class="contents">
          <h3 class="title">신청 서비스 수수료 결제</h3>

          <div class="box icon">
            <div class="box_wrap">
              <div class="box_title">온라인 결제 안내</div>
              <p>민원 서류 발급을 위한 수수료 결제 단계입니다. 아래 결제 정보를 확인하신 후 결제하기 버튼을 클릭하여 주시기 바랍니다.</p>
            </div>
          </div>

          <div class="temp_box type1" style="margin-top: 20px;">
            <div class="box_wrap">
              <ul class="ul_common">
                <li><strong>결제 항목 :</strong> 민원 서류 발급 수수료</li>
                <li><strong>결제 금액 :</strong> <span style="color:#e63946; font-weight:bold; font-size: 18px;">1,500원</span></li>
                <li><strong>결제 수단 :</strong> 카카오페이 (간편결제)</li>
              </ul>
            </div>
          </div>

          <div style="text-align: center; margin-top: 40px;">
            <button type="button" onclick="goPayment()"
                    style="padding:15px 50px; background:#004ea2; color:#fff; border:none; cursor:pointer; font-size:16px; font-weight:bold; border-radius:3px;">
              카카오페이로 결제하기
            </button>
          </div>
        </div>
      </main>
    </div>
  </div>

  <footer class="footer" th:replace="~{/common/header_footer_layout :: footer}"></footer>
</div>

<script th:inline="javascript">
  function goPayment() {
    if(!confirm("결제를 진행하시겠습니까?")) return;

    const IMP = window.IMP;
    IMP.init("imp67061263"); // 포트원 공용 테스트 가맹점 식별코드

    IMP.request_pay({
      pg: "kakaopay.TC0ONETIME", // 카카오페이 테스트
      pay_method: "card",
      merchant_uid: "order_" + new Date().getTime(), // 고유 주문번호
      name: "민원 수수료 결제",
      amount: 1500,
      buyer_name: "홍길동"
    }, function (rsp) {
      if (rsp.success) {
        alert("결제가 성공적으로 완료되었습니다.");
        // 결제 성공 시 이동할 서브 페이지 경로 (필요에 따라 수정)
        location.href = "/sub/status";
      } else {
        alert("결제에 실패하였습니다. 사유: " + rsp.error_msg);
      }
    });
  }
</script>
</body>
</html>